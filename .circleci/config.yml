version: 2.1

orbs:
  myorb:
    executors:
      default:
        parameters:
          image-name:
            type: string
            default: "circleci/node"
          image-tag:
            type: string
            default: "latest"
        docker:
          - image: << parameters.image-name>>:<< parameters.image-tag >>


  rover:
    commands:
      install:
        parameters:
          version:
            type: string
            default: "v0.0.4"
        steps:
          - run: curl -sSL https://raw.githubusercontent.com/apollographql/rover/<< parameters.version >>/installers/binstall/scripts/nix/install.sh | sh


commands:
  mine:
    parameters:
      matrix:
        type: string
        default: "hi"
    steps:
      - run: echo << parameters.matrix >>

jobs:
  build:
    executor: myorb/default
    steps:
      - run: docker -v
      - rover/install
  mine:
    parameters:
      matrix:
        type: string
        default: "hi"
    executor: myorb/default
    steps:
      - run: echo << parameters.matrix >>

workflows:
  mine:
    jobs:
      - build



